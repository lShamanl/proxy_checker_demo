# Deploy
## Instruction

Install infrastructure:
```
make app
```

Generate deploy key:
```
make generate-deploy-key
```

Add user authorized key:
```
make generate-deploy-key
```

Authorize deploy:
```
make authorize-deploy
```

Login from docker registry:
```
make docker-login
```

## Other

Мне нужно развернуть это приложение на проде.

Для этого мне нужно развернуть на продовой тачке докер и докер-композ, по идеи
чтобы этого достичь мне достаточно выполнить команду:
```
make app
```

Далее - мне нужно залить какой-то коммит в докер-реджестри
Далее - собрать продовый образ
Далее - на проде выполнить пулл из докер-реджестри.

Это что касается ручного прогона. В идеале же я хочу, чтобы за меня это делал CI/CD.
Например, Teamcity. Получается, для этого мне нужно будет настроить триггер, который
будет срабатывать при пуше в мастер, и выполнять описанные выше шаги.

Итак, две цели:
1 - выкатить в прод вручную через ансибл
2 - научить тимсити выкатывать в прод через ансибл
